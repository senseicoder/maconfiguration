---
# git

- set_fact: 
    dirconf: "{{ basedir }}/.config/git"

- name: fichier de configuration git
  file: path={{ dirconf }} state=directory owner={{ compte }} group={{ compte }}

- name: configuration git (ignore 1)
  lineinfile: dest="{{ dirconf }}/ignore" line="**/*.sublime-workspace" owner={{ ansible_user }} group={{ ansible_user }} create=yes state=present

- name: configuration git (ignore 2)
  lineinfile: dest="{{ dirconf }}/ignore" line="**/*.retry" owner={{ ansible_user }} group={{ ansible_user }} create=yes state=present

#https://help.github.com/articles/caching-your-github-password-in-git/
- shell: git config --global credential.helper 'cache --timeout=36000'
  become: yes
  become_user: "{{ ansible_user }}"
  changed_when: false

- name: git configure
  command: git config --global push.default matching
  changed_when: false
